<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Marlin: marlin::concurrency::PEPScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Marlin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>marlin</b></li><li class="navelem"><b>concurrency</b></li><li class="navelem"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html">PEPScheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmarlin_1_1concurrency_1_1PEPScheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">marlin::concurrency::PEPScheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html" title="PEPScheduler class Parallel Event Processing Scheduler. ">PEPScheduler</a> class Parallel Event Processing Scheduler.  
 <a href="classmarlin_1_1concurrency_1_1PEPScheduler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PEPScheduler_8h_source.html">PEPScheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for marlin::concurrency::PEPScheduler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmarlin_1_1concurrency_1_1PEPScheduler.png" usemap="#marlin::concurrency::PEPScheduler_map" alt=""/>
  <map id="marlin::concurrency::PEPScheduler_map" name="marlin::concurrency::PEPScheduler_map">
<area href="classmarlin_1_1IScheduler.html" title="IScheduler interface Interface for implementing a scheduling algorithm for event processing. " alt="marlin::IScheduler" shape="rect" coords="0,0,213,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7bf10a5bcc0708555e45bc11aed3e550"><td class="memItemLeft" align="right" valign="top"><a id="a7bf10a5bcc0708555e45bc11aed3e550"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>ConditionsMap</b> = std::map&lt; std::string, std::string &gt;</td></tr>
<tr class="separator:a7bf10a5bcc0708555e45bc11aed3e550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0915c5a1fd134eed88bdba3bed4d240"><td class="memItemLeft" align="right" valign="top"><a id="ad0915c5a1fd134eed88bdba3bed4d240"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>InputType</b> = std::shared_ptr&lt; EVENT::LCEvent &gt;</td></tr>
<tr class="separator:ad0915c5a1fd134eed88bdba3bed4d240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15add823e8cd26547963703aeab3a7f1"><td class="memItemLeft" align="right" valign="top"><a id="a15add823e8cd26547963703aeab3a7f1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OutputType</b> = <a class="el" href="structmarlin_1_1concurrency_1_1WorkerOutput.html">WorkerOutput</a></td></tr>
<tr class="separator:a15add823e8cd26547963703aeab3a7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff02a968470f1b8e4660c03dc8b5697"><td class="memItemLeft" align="right" valign="top"><a id="adff02a968470f1b8e4660c03dc8b5697"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>WorkerPool</b> = <a class="el" href="classmarlin_1_1concurrency_1_1ThreadPool.html">ThreadPool</a>&lt; InputType, <a class="el" href="structmarlin_1_1concurrency_1_1WorkerOutput.html">OutputType</a> &gt;</td></tr>
<tr class="separator:adff02a968470f1b8e4660c03dc8b5697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3289059d09315bbbd8277249b41474"><td class="memItemLeft" align="right" valign="top"><a id="a8e3289059d09315bbbd8277249b41474"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Logger</b> = Logging::Logger</td></tr>
<tr class="separator:a8e3289059d09315bbbd8277249b41474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef43c2c8185becbf261dd9d26ff255eb"><td class="memItemLeft" align="right" valign="top"><a id="aef43c2c8185becbf261dd9d26ff255eb"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>ProcessorSequence</b> = std::shared_ptr&lt; <a class="el" href="classmarlin_1_1SuperSequence.html">SuperSequence</a> &gt;</td></tr>
<tr class="separator:aef43c2c8185becbf261dd9d26ff255eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ac13bd21231a8f07e62283d0c3e2cf"><td class="memItemLeft" align="right" valign="top"><a id="a03ac13bd21231a8f07e62283d0c3e2cf"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>PushResultList</b> = std::vector&lt; WorkerPool::PushResult &gt;</td></tr>
<tr class="separator:a03ac13bd21231a8f07e62283d0c3e2cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a408a286535499a75bb538953de9f1997"><td class="memItemLeft" align="right" valign="top"><a id="a408a286535499a75bb538953de9f1997"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>EventList</b> = std::vector&lt; std::shared_ptr&lt; EVENT::LCEvent &gt; &gt;</td></tr>
<tr class="separator:a408a286535499a75bb538953de9f1997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971c8795feda4c4920f998daccb598f1"><td class="memItemLeft" align="right" valign="top"><a id="a971c8795feda4c4920f998daccb598f1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Clock</b> = std::chrono::steady_clock</td></tr>
<tr class="separator:a971c8795feda4c4920f998daccb598f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada69f2fd75799a2f0b68099166fb43f1"><td class="memItemLeft" align="right" valign="top"><a id="ada69f2fd75799a2f0b68099166fb43f1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>TimePoint</b> = std::chrono::steady_clock::time_point</td></tr>
<tr class="separator:ada69f2fd75799a2f0b68099166fb43f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0073eec7813c50ab53aa5af128a6c774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#a0073eec7813c50ab53aa5af128a6c774">init</a> (<a class="el" href="classmarlin_1_1Application.html">Application</a> *app) override</td></tr>
<tr class="memdesc:a0073eec7813c50ab53aa5af128a6c774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the scheduler with app parameters.  <a href="#a0073eec7813c50ab53aa5af128a6c774">More...</a><br /></td></tr>
<tr class="separator:a0073eec7813c50ab53aa5af128a6c774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8768321862802abd5822f476ed33b1bc"><td class="memItemLeft" align="right" valign="top"><a id="a8768321862802abd5822f476ed33b1bc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#a8768321862802abd5822f476ed33b1bc">end</a> () override</td></tr>
<tr class="memdesc:a8768321862802abd5822f476ed33b1bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate the scheduler activites Cleanup memory, etc ... <br /></td></tr>
<tr class="separator:a8768321862802abd5822f476ed33b1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83744239f6f487f3d515ec126d10096e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#a83744239f6f487f3d515ec126d10096e">processRunHeader</a> (std::shared_ptr&lt; EVENT::LCRunHeader &gt; rhdr)</td></tr>
<tr class="memdesc:a83744239f6f487f3d515ec126d10096e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a run header.  <a href="#a83744239f6f487f3d515ec126d10096e">More...</a><br /></td></tr>
<tr class="separator:a83744239f6f487f3d515ec126d10096e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2958256e8d5b36cb00cf0326f2c01084"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#a2958256e8d5b36cb00cf0326f2c01084">pushEvent</a> (std::shared_ptr&lt; EVENT::LCEvent &gt; event) override</td></tr>
<tr class="memdesc:a2958256e8d5b36cb00cf0326f2c01084"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a new event to the scheduler for processing.  <a href="#a2958256e8d5b36cb00cf0326f2c01084">More...</a><br /></td></tr>
<tr class="separator:a2958256e8d5b36cb00cf0326f2c01084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea04a94fdbe98fc3c9c0802a3bff3c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#a1ea04a94fdbe98fc3c9c0802a3bff3c5">popFinishedEvents</a> (std::vector&lt; std::shared_ptr&lt; EVENT::LCEvent &gt;&gt; &amp;events) override</td></tr>
<tr class="memdesc:a1ea04a94fdbe98fc3c9c0802a3bff3c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve finished events from the scheduler.  <a href="#a1ea04a94fdbe98fc3c9c0802a3bff3c5">More...</a><br /></td></tr>
<tr class="separator:a1ea04a94fdbe98fc3c9c0802a3bff3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefb4fd3935440ff68c3f1e75344ead8b"><td class="memItemLeft" align="right" valign="top"><a id="aefb4fd3935440ff68c3f1e75344ead8b"></a>
std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#aefb4fd3935440ff68c3f1e75344ead8b">freeSlots</a> () const override</td></tr>
<tr class="memdesc:aefb4fd3935440ff68c3f1e75344ead8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of free event slots. <br /></td></tr>
<tr class="separator:aefb4fd3935440ff68c3f1e75344ead8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html" title="PEPScheduler class Parallel Event Processing Scheduler. ">PEPScheduler</a> class Parallel Event Processing Scheduler. </p>
<p>Implements the scheduling of parallel inter-event processing.</p>
<p>A set of N worker threads are allocated at startup within a thread pool. Every time a new event is pushed in the scheduler, the event is queued in the thread pool for further processing. Note that this operation can fail if the thread pool queue is full. Use <a class="el" href="classmarlin_1_1concurrency_1_1PEPScheduler.html#aefb4fd3935440ff68c3f1e75344ead8b" title="Get the number of free event slots. ">freeSlots()</a> to know how many slots are free in the thread pool queue and avoid unexpected exceptions. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0073eec7813c50ab53aa5af128a6c774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0073eec7813c50ab53aa5af128a6c774">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marlin::concurrency::PEPScheduler::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmarlin_1_1Application.html">Application</a> *&#160;</td>
          <td class="paramname"><em>app</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the scheduler with app parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>the application in which the scheduler runs </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmarlin_1_1IScheduler.html#a043b3fac1587242d8937aaca575d0a8a">marlin::IScheduler</a>.</p>

<p class="reference">References <a class="el" href="classmarlin_1_1Application.html#a32a44713e83354acca7752891cc53c01">marlin::Application::createLogger()</a>, and <a class="el" href="classmarlin_1_1clock.html#ae1ba373d0ac8a8468044b57128f8b096">marlin::clock::now()</a>.</p>

</div>
</div>
<a id="a1ea04a94fdbe98fc3c9c0802a3bff3c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea04a94fdbe98fc3c9c0802a3bff3c5">&#9670;&nbsp;</a></span>popFinishedEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marlin::concurrency::PEPScheduler::popFinishedEvents </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::shared_ptr&lt; EVENT::LCEvent &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>events</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve finished events from the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">events</td><td>the list of event to retrieve </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmarlin_1_1IScheduler.html#a30b54277206eca898a0ea8ac6f44d883">marlin::IScheduler</a>.</p>

</div>
</div>
<a id="a83744239f6f487f3d515ec126d10096e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83744239f6f487f3d515ec126d10096e">&#9670;&nbsp;</a></span>processRunHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marlin::concurrency::PEPScheduler::processRunHeader </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; EVENT::LCRunHeader &gt;&#160;</td>
          <td class="paramname"><em>rhdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process a run header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rhdr</td><td>the run header to process </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmarlin_1_1IScheduler.html#a2f77a7a3b74b875bc492311f8971ff37">marlin::IScheduler</a>.</p>

<p class="reference">References <a class="el" href="classmarlin_1_1clock.html#ae1ba373d0ac8a8468044b57128f8b096">marlin::clock::now()</a>.</p>

</div>
</div>
<a id="a2958256e8d5b36cb00cf0326f2c01084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2958256e8d5b36cb00cf0326f2c01084">&#9670;&nbsp;</a></span>pushEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marlin::concurrency::PEPScheduler::pushEvent </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; EVENT::LCEvent &gt;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push a new event to the scheduler for processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>the event to push </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmarlin_1_1IScheduler.html#a336598b4b1a9643fabcc1487944208d2">marlin::IScheduler</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="PEPScheduler_8h_source.html">PEPScheduler.h</a></li>
<li>PEPScheduler.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
