\section{marlin\+:\+:X\+M\+L\+Parser Class Reference}
\label{classmarlin_1_1XMLParser}\index{marlin\+::\+X\+M\+L\+Parser@{marlin\+::\+X\+M\+L\+Parser}}


X\+ML parser for Marlin steering files.  




{\ttfamily \#include $<$X\+M\+L\+Parser.\+h$>$}

Inheritance diagram for marlin\+:\+:X\+M\+L\+Parser\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classmarlin_1_1XMLParser}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \textbf{ L\+C\+Tokenizer}
\begin{DoxyCompactList}\small\item\em Helper class for \doxyref{X\+M\+L\+Parser}{p.}{classmarlin_1_1XMLParser}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classmarlin_1_1XMLParser_a8638b4df3966d357bbeeff499e528031}} 
{\bfseries X\+M\+L\+Parser} (const std\+::string \&file\+Name, bool for\+C\+Check=false)
\item 
\mbox{\label{classmarlin_1_1XMLParser_a0d3e60b3fd3daa02511796e3fb553565}} 
void \textbf{ set\+Cmd\+Line\+Parameters} (const Command\+Line\+Parameters\+Map \&cmdlineparams)
\begin{DoxyCompactList}\small\item\em set command line parameters \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a59cdca91e34806158f92adc2577a3c11}} 
void \textbf{ parse} ()
\begin{DoxyCompactList}\small\item\em Parse the input file. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a3c2a5590848614b0c6e6058a18229c48}} 
std\+::shared\+\_\+ptr$<$ \textbf{ String\+Parameters} $>$ \textbf{ get\+Parameters} (const std\+::string \&section\+Name) const
\begin{DoxyCompactList}\small\item\em Return the \doxyref{String\+Parameters}{p.}{classmarlin_1_1StringParameters} for the section as read from the xml file. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_ae8dcb9522364d31477a39efa28adff8e}} 
void \textbf{ write} (const std\+::string \&filen) const
\begin{DoxyCompactList}\small\item\em Write the parsed X\+ML tree in an other file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classmarlin_1_1XMLParser_a7413d510eb7abcbcafd1f3d699fe3bef}} 
void \textbf{ parameters\+From\+Node} (\textbf{ Ti\+Xml\+Node} $\ast$section, std\+::map$<$ std\+::string, std\+::string $>$ \&constants, std\+::pair$<$ unsigned, unsigned $>$ $\ast$type\+Count=0)
\begin{DoxyCompactList}\small\item\em Extracts all parameters from the given node and adss them to the current \doxyref{String\+Parameters}{p.}{classmarlin_1_1StringParameters} object. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a34858c39fcb860aaf2f4d76590bbadd1}} 
const char $\ast$ \textbf{ get\+Attribute} (\textbf{ Ti\+Xml\+Node} $\ast$node, const std\+::string \&name)
\begin{DoxyCompactList}\small\item\em Return named attribute -\/ throws \doxyref{Parse\+Exception}{p.}{classmarlin_1_1ParseException} if attribute doesn\textquotesingle{}t exist. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a6d986949620e410cef5057470ce599d0}} 
void \textbf{ replacegroups} (\textbf{ Ti\+Xml\+Node} $\ast$section)
\begin{DoxyCompactList}\small\item\em Helper method -\/ replaces all $<$group$>$ tag with corresponding $<$processor$>$ tags. \end{DoxyCompactList}\item 
\textbf{ Ti\+Xml\+Node} $\ast$ \textbf{ find\+Element} (\textbf{ Ti\+Xml\+Node} $\ast$node, const std\+::string \&type, const std\+::string \&attribute, const std\+::string \&value)
\begin{DoxyCompactList}\small\item\em Helper method -\/ finds child element of node with given type and attribute value. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_ae5155837c9ad13c4d6173136bf23f573}} 
void \textbf{ processconditions} (\textbf{ Ti\+Xml\+Node} $\ast$current, const std\+::string \&conditions)
\begin{DoxyCompactList}\small\item\em Helper method -\/ recursively moves processors from $<$if$>$ tags to top level ($<$execute$>$) and adds corresponding conditions attribute. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a742a3ba87a376b23e167a1d2b6a9c5c8}} 
void \textbf{ process\+Include\+Elements} (\textbf{ Ti\+Xml\+Element} $\ast$element, const std\+::map$<$ std\+::string, std\+::string $>$ \&constants)
\begin{DoxyCompactList}\small\item\em Helper method -\/ recursively replace all  with the corresponding file content. \end{DoxyCompactList}\item 
\mbox{\label{classmarlin_1_1XMLParser_a45f0f1b116f52c2c3c04c1c82bd0dc60}} 
void {\bfseries process\+Include\+Element} (\textbf{ Ti\+Xml\+Element} $\ast$element, const std\+::map$<$ std\+::string, std\+::string $>$ \&constants, \textbf{ Ti\+Xml\+Document} \&document)
\item 
\mbox{\label{classmarlin_1_1XMLParser_a7b2d9026d1886799ddec1d4603ff6ee7}} 
void {\bfseries process\+Constants} (\textbf{ Ti\+Xml\+Node} $\ast$node, std\+::map$<$ std\+::string, std\+::string $>$ \&constants)
\item 
\mbox{\label{classmarlin_1_1XMLParser_aeea7491fbbb08dcdef70069fe7dcb847}} 
void {\bfseries process\+Constant} (\textbf{ Ti\+Xml\+Element} $\ast$element, std\+::map$<$ std\+::string, std\+::string $>$ \&constants)
\item 
\mbox{\label{classmarlin_1_1XMLParser_a8b7b098ddb240cb685bb84fe195c3ac2}} 
std\+::string \& {\bfseries perform\+Constant\+Replacement} (std\+::string \&value, const std\+::map$<$ std\+::string, std\+::string $>$ \&constants)
\item 
\mbox{\label{classmarlin_1_1XMLParser_a9d4652d10e313ebbe75e2a001d151902}} 
void {\bfseries check\+For\+Nested\+Includes} (const \textbf{ Ti\+Xml\+Node} $\ast$node)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classmarlin_1_1XMLParser_a88b10050637dc6b03cc658931ab3ad51}} 
String\+Parameters\+Map {\bfseries \+\_\+map} \{\}
\item 
\mbox{\label{classmarlin_1_1XMLParser_ad7ad70d4a111a7f0b7c006d91e1f4587}} 
\textbf{ String\+Parameters} $\ast$ {\bfseries \+\_\+current}
\item 
\mbox{\label{classmarlin_1_1XMLParser_ad6e7aaeb66fd003001a65d388ba3f469}} 
std\+::unique\+\_\+ptr$<$ \textbf{ Ti\+Xml\+Document} $>$ {\bfseries \+\_\+doc} \{\}
\item 
\mbox{\label{classmarlin_1_1XMLParser_aefdf5a55bee04b36d19e0c97eca9fcc2}} 
std\+::string {\bfseries \+\_\+file\+Name}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
X\+ML parser for Marlin steering files. 

Marlin X\+ML steering files have the following form (use {\bfseries Marlin -\/x $>$ example.\+xml} to generate a template steering file)\+:~\newline



\begin{DoxyPre}
 <marlin>
  <execute>   [1]
     ...  // the processors and processor groups to be executed
  </execute>
  <global>    [1]
     ...  // global parameter section
  </global>
  <processor> [n]
     ...  // definition of the processor and its parameters
  </processor>
  <group> [m]   
     ...    // a group of processors
    <processor> [k]
     ...  // definition of the processor and its parameters
    </processor>
  </group> 
 </marlin>
\end{DoxyPre}
 where the numbers enclosed in \char`\"{}[$\,$]\char`\"{} denote how many elements of the given type are allowed or required, n,m,k = [0,1,2,...]. 

The $<$execute/$>$ section defines the processors that are to be called in the order specified. The \doxyref{Processor\+::process\+Event()}{p.}{classmarlin_1_1Processor_a5bee49b5515f59fae755e0a26dfae91a} method is only called if the relevant condition ($<$if condition=\char`\"{}\+A\char`\"{}/$>$) is fullfilled. Conditions can be arbitrary logical expressions formed of [!,(,\&\&,$\vert$$\vert$,),value], e.\+g.~\newline
 ( A \&\& ( B $\vert$$\vert$ !C ) ) $\vert$$\vert$ ( !B \&\& D ), where the keys A,B,C,D can be either procesor names (Processor\+::set\+Return\+Value(bool val) ) or processor names followed by a string ( Processor\+::set\+Return\+Value(const std\+::string \&name, bool val) ). ~\newline
 In the following example the Pflow processor is only called for events where the Event\+Selection processor has returnd true and the Two\+Jet\+Analysis is is then in turn only called for events identified as having tow jets by the Pflow processor


\begin{DoxyPre}
 <execute>
  <processor name="MyAIDAProcessor"/>
  <processor name="EventSelection"/>  
  <if condition="EventSelection">
    <processor name="Pflow"/>  
    <if condition="Pflow.TwoJet">
      <group name="TwoJetAnalysis"/>
    </if>
  </if>
  <processor name="MyLCIOOutputProcessor"/>  
 </execute>   
 \end{DoxyPre}
 The $<$global$>$ section defines the global paramters\+: 
\begin{DoxyPre}
 <global>
   <parameter name="LCIOInputFiles">dd\_rec.slcio </parameter>
   <parameter name="LCIOInputFiles">../tt500\_all\_set1\_12.slcio </parameter>
   <parameter name="MaxRecordNumber" value="5001" />  
   <parameter name="SupressCheck" value="false" />  
 </global>
\end{DoxyPre}
 {\bfseries Parameters can be either specified as the content of the $<$parameter/$>$ tag or in the value-\/attribute of the tag !} 

The $<$processor name=\char`\"{}...\char`\"{} type=\char`\"{}...\char`\"{} $>$ section defines the processor and its parameters, where name and type are required attibutes, e.\+g. 
\begin{DoxyPre}
 <processor name="EventSelection" type="SelectionProcessor">
   <parameter name="EnergyCut" type="float">50.0</parameter>
 </processor>
\end{DoxyPre}
 Note\+: the parameter\textquotesingle{}s type-\/attribute is optional. 

\doxyref{Processor}{p.}{classmarlin_1_1Processor} sections can be enclosed in a $<$group/$>$ tag, where parameters defined outside any $<$processor/$>$ tag are group parameters valid for all processors in the group, .e.\+g. 
\begin{DoxyPre}
 <group>
   <parameter name="PtCut" value="0.03">
   <processor name="TrackFinding" type="TrackFinder"/>
   <processor name="TrackFitting" type="KalmanProcessor">
     <parameter name="UseDAF" value="true">
   <processor>
 </group>
\end{DoxyPre}


\begin{DoxyAuthor}{Author}
F. Gaede, D\+E\+SY 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}

\end{DoxyVersion}
\begin{DoxyParagraph}{Id}
\doxyref{X\+M\+L\+Parser.\+h}{p.}{XMLParser_8h_source},v 1.\+7 2007-\/07-\/18 12\+:43\+:09 engels Exp 
\end{DoxyParagraph}


\subsection{Member Function Documentation}
\mbox{\label{classmarlin_1_1XMLParser_aa7f3a8581f765d86cf67cdafb8924f2a}} 
\index{marlin\+::\+X\+M\+L\+Parser@{marlin\+::\+X\+M\+L\+Parser}!find\+Element@{find\+Element}}
\index{find\+Element@{find\+Element}!marlin\+::\+X\+M\+L\+Parser@{marlin\+::\+X\+M\+L\+Parser}}
\subsubsection{find\+Element()}
{\footnotesize\ttfamily \textbf{ Ti\+Xml\+Node} $\ast$ marlin\+::\+X\+M\+L\+Parser\+::find\+Element (\begin{DoxyParamCaption}\item[{\textbf{ Ti\+Xml\+Node} $\ast$}]{node,  }\item[{const std\+::string \&}]{type,  }\item[{const std\+::string \&}]{attribute,  }\item[{const std\+::string \&}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Helper method -\/ finds child element of node with given type and attribute value. 



References Ti\+Xml\+Element\+::\+Attribute(), Ti\+Xml\+Node\+::\+Iterate\+Children(), and Ti\+Xml\+Node\+::\+To\+Element().



Referenced by set\+Cmd\+Line\+Parameters().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
X\+M\+L\+Parser.\+h\item 
X\+M\+L\+Parser.\+cc\end{DoxyCompactItemize}
